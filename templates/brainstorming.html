{% extends "layout.html" %}
{% block title %}头脑风暴{% endblock %}
{% block content %}
<div class="page-header">
    <h1>头脑风暴：发现创新研究课题</h1>
    <p>基于综合分析报告和所有单篇分析的深度洞察，激发具有创新性的研究问题。</p>
</div>

<div class="controls-card">
    <h3>参数设置</h3>
    <div class="control-group">
        <label for="model-select">选择模型:</label>
        <select id="model-select">
            {% for model in models %}
            <option value="{{ model }}">{{ model }}{% if loop.first %} (推荐){% endif %}</option>
            {% endfor %}
        </select>
    </div>
    <div class="control-group">
        <label for="temp-slider">Temperature (0-2): <span id="temp-value">1</span></label>
        <input type="range" id="temp-slider" min="0" max="2" step="0.1" value="1">
    </div>
    <button id="start-brainstorming-btn" class="btn-primary">开始头脑风暴</button>
</div>

<div class="content-card">
    <div class="card-header-controls">
        <h3>头脑风暴结果</h3>
        <div id="history-controls" class="history-controls" style="display: none;">
            <button id="undo-btn" class="btn-secondary" title="回退 (Ctrl+Z)" disabled><i class="fas fa-undo"></i></button>
            <button id="redo-btn" class="btn-secondary" title="前进 (Ctrl+Y)" disabled><i class="fas fa-redo"></i></button>
        </div>
    </div>

    <p id="analysis-basis">
        分析依据: 单篇文献分析结果及综合文献分析结果
    </p>
    <div id="brainstorming-output" class="markdown-content">
        <p>正在加载已有结果...</p>
    </div>
</div>

<div id="modification-bar" class="modification-bar" style="display: none;">
    <textarea id="modification-prompt" placeholder="输入您的修改指令...（Enter 提交, Shift+Enter 换行）"></textarea>
    <button id="submit-modification-btn" class="btn btn-primary">提交修改</button>
</div>
{% endblock %}